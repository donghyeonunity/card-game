# Phase 1 프로토타입 (v2) - 전투 시스템

docs/Prototype-Game.md (v2) 명세를 기반으로 구현된 가치 충돌 검증 프로토타입입니다.

## 주요 변경사항 (v1 → v2)

### 전투 시스템 추가
- **적 HP**: 100 (처치 목표)
- **적 반격**: 매 턴 10 데미지
- **플레이어 HP**: 50 (생존 조건)
- **시작 에너지**: 0
- **기본 공격**: 에너지 3 소모 → 데미지 20
- **승리 조건**: 적 HP ≤ 0
- **패배 조건**: 플레이어 HP ≤ 0
- **암묵적 턴 제한**: 5턴 (반격 10 × 5 = 50)

### 검증 목표
- 플레이어가 카드 선택에서 **가치 충돌을 명확히 인지**하는가?
- 전투 맥락이 카드 선택에 영향을 주는가?

### 카드 구성
총 **6장**의 카드 (v1: 7장 → v2: 6장)

1. **에너지 수급** - [단기↔장기 | 태그 O]
2. **공격 방식** - [안정↔변동 | 태그 O]
3. **자원 배분** - [효율↔확장 | 태그 X]
4. **방어 선택** - [통제↔자유 | 태그 X]
5. **전략 전환** - [단기↔장기 | 태그 O]
6. **최종 선택** - [효율↔확장 | 태그 O]

- **태그 표시**: 4장 (카드 1, 2, 5, 6)
- **텍스트만**: 2장 (카드 3, 4)

### 게임 흐름
```
턴 시작 → 카드 제시(A/B) → 선택 → 효과 적용 →
[공격 버튼] (에너지 ≥ 3 시) → 적 HP 감소 → 적 반격 → 턴 종료
```

## 설치 및 실행

### 1. 의존성 설치
```bash
cd Prototype
npm install
```

### 2. 개발 서버 실행
```bash
npm run dev
```

브라우저에서 http://localhost:5173 접속

### 3. 프로덕션 빌드
```bash
npm run build
```

빌드된 파일은 `dist/` 폴더에 생성됩니다.

## 데이터 수집

### 자동 수집 (각 카드 선택마다)
기존 데이터에 추가된 항목:
- `turn_number`: 현재 턴
- `player_hp`: 선택 시 플레이어 HP
- `enemy_hp`: 선택 시 적 HP
- `player_energy`: 선택 시 플레이어 에너지
- `decision_time_ms`, `hover_time_a_ms`, `hover_time_b_ms`, `switch_count` 등

### 게임 결과
- `result`: 승리/패배
- `total_turns`: 총 턴 수
- `remaining_hp`: 종료 시 플레이어 HP
- `final_energy`: 최종 에너지

### 설문 조사 (종료 후)
- **Q1**: 선택할 때 고민이 되었나요? (5점 척도)
- **Q2**: 두 옵션 사이에 트레이드오프가 느껴졌나요? (5점 척도)
- **Q3**: 가장 고민되었던 카드는? (1-6)
- **Q4**: 적의 존재가 선택에 영향을 주었나요? (5점 척도) ⭐ 신규

### 데이터 내보내기
설문 완료 후 결과 화면에서:
- **CSV 다운로드**: 모든 선택 데이터 + 전투 결과 + 설문
- **JSON 복사**: 전체 데이터를 JSON 형식으로 클립보드 복사

## 프로젝트 구조

```
Prototype/
├── src/
│   ├── components/
│   │   ├── BattleUI.tsx       # 전투 UI (HP, 에너지)
│   │   ├── CardChoice.tsx     # 카드 선택 UI
│   │   ├── Survey.tsx         # 설문 조사 (Q1-Q4)
│   │   └── Results.tsx        # 결과 화면 & 데이터 내보내기
│   ├── stores/
│   │   └── gameStore.ts       # Zustand 게임 상태 관리
│   ├── data/
│   │   └── cards.ts           # 카드 데이터 (6장)
│   ├── types/
│   │   └── index.ts           # TypeScript 타입 정의
│   ├── App.tsx                # 메인 앱 컴포넌트
│   └── main.tsx               # 엔트리 포인트
├── docs/
│   └── Prototype-Game.md      # v2 명세 문서
└── package.json
```

## 게임 플레이 가이드

### 전투 단계

1. **턴 시작**
   - 적과 플레이어의 HP, 에너지 확인
   - 현재 턴 확인

2. **카드 선택**
   - 제시된 카드의 A/B 옵션 읽기
   - 옵션에 마우스를 올려 비교
   - 원하는 옵션 클릭하여 선택

3. **카드 효과 적용**
   - 선택한 옵션의 효과 즉시 적용
   - 에너지 증가/감소, HP 변화 등

4. **공격/턴 종료**
   - 6장 카드 모두 선택 완료 후
   - **공격 버튼**: 에너지 3 소모하여 적에게 데미지 20
   - **턴 종료 버튼**: 적 반격 받고 다음 턴으로

5. **승리 또는 패배**
   - 승리: 적 HP 0
   - 패배: 플레이어 HP 0

## 검증 기준

### 성공 기준
| 지표 | 기준 | 의미 |
|------|------|------|
| 평균 선택 시간 | ≥ 3초 | 멈춤 발생 |
| A/B 비율 | 40-60% | 균형 잡힌 트레이드오프 |
| 전환 횟수 | 평균 ≥ 1회 | 비교 행동 발생 |
| 설문 Q2 | 평균 ≥ 3.5점 | 주관적 충돌 인지 |
| 설문 Q4 | 평균 ≥ 3점 | 적이 맥락 제공 |

### 실패 기준 (Kill Criteria)
| 지표 | 기준 | 의미 |
|------|------|------|
| 평균 선택 시간 | < 2초 | 고민 없음 |
| A/B 비율 | > 75/25 | "정답" 존재 |
| 설문 Q1 | 평균 < 2점 | 고민 경험 없음 |

## 기술 스택

- **React 18** + **TypeScript**
- **Vite** (빌드 도구)
- **Zustand** (상태 관리)
- **Framer Motion** (애니메이션)
- **Tailwind CSS v4** (스타일링)

## 문제 해결

### 빌드 오류
```bash
# node_modules 삭제 후 재설치
rm -rf node_modules package-lock.json
npm install
```

### 개발 서버가 시작되지 않을 때
```bash
# 포트가 사용 중인지 확인
# Windows
netstat -ano | findstr :5173

# 프로세스 종료 후 재시도
npm run dev
```

## 참고 문서

- **PRD**: `docs/PRD.md` - 게임 전체 철학
- **v2 명세**: `docs/Prototype-Game.md` - Phase 1 프로토타입 상세 명세
- **CLAUDE.md**: 프로젝트 개발 가이드라인
