<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì „íˆ¬ ë°°ê²½ ìƒì„±ê¸°</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #1a1a1a;
            color: #00ff00;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        h1 {
            color: #00ff00;
            text-shadow: 0 0 10px #00ff00;
        }
        #canvas {
            border: 2px solid #00ff00;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
            margin: 20px 0;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
            width: 640px;
            height: 360px;
        }
        .controls {
            background: #2a2a2a;
            padding: 20px;
            border: 1px solid #00ff00;
            border-radius: 5px;
            margin-top: 20px;
        }
        button {
            background: #003300;
            color: #00ff00;
            border: 2px solid #00ff00;
            padding: 10px 20px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin: 5px;
            transition: all 0.3s;
        }
        button:hover {
            background: #00ff00;
            color: #003300;
            box-shadow: 0 0 10px #00ff00;
        }
        .info {
            background: #2a2a2a;
            padding: 15px;
            border-left: 3px solid #00ff00;
            margin-top: 20px;
            max-width: 640px;
        }
        .color-palette {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        .color-box {
            width: 50px;
            height: 50px;
            border: 1px solid #00ff00;
            position: relative;
        }
        .color-label {
            font-size: 10px;
            margin-top: 5px;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>âš”ï¸ í”„ë¡œí† íƒ€ì… ì „íˆ¬ ë°°ê²½ ìƒì„±ê¸°</h1>

    <canvas id="canvas" width="320" height="180"></canvas>

    <div class="controls">
        <button onclick="generateBackground()">ğŸ¨ ë°°ê²½ ìƒì„±</button>
        <button onclick="downloadImage()">ğŸ’¾ ë‹¤ìš´ë¡œë“œ (PNG)</button>
    </div>

    <div class="info">
        <h3>ğŸ“‹ ë°°ê²½ ì •ë³´</h3>
        <p><strong>í•´ìƒë„:</strong> 320 x 180 í”½ì…€ (16:9)</p>
        <p><strong>ìŠ¤íƒ€ì¼:</strong> í”½ì…€ ì•„íŠ¸ ê·¸ë¼ë°ì´ì…˜</p>
        <p><strong>ìš©ë„:</strong> í”„ë¡œí† íƒ€ì… ì „íˆ¬ í™”ë©´ ë°°ê²½</p>
        <p><strong>ìƒ‰ìƒ íŒ”ë ˆíŠ¸:</strong></p>
        <div class="color-palette">
            <div>
                <div class="color-box" style="background: #1A0F1F;"></div>
                <div class="color-label">#1A0F1F<br>ë³´ì´ë“œ ë¸”ë™</div>
            </div>
            <div>
                <div class="color-box" style="background: #3B1F47;"></div>
                <div class="color-label">#3B1F47<br>ë‹¤í¬ í¼í”Œ</div>
            </div>
            <div>
                <div class="color-box" style="background: #4A3B52;"></div>
                <div class="color-label">#4A3B52<br>ìŠ¤í†¤ ê·¸ë ˆì´</div>
            </div>
            <div>
                <div class="color-box" style="background: #6A146A;"></div>
                <div class="color-label">#6A146A<br>ë”¥ ë°”ì´ì˜¬ë ›</div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        // ìƒ‰ìƒ íŒ”ë ˆíŠ¸
        const COLORS = {
            voidBlack: { hex: '#1A0F1F', rgb: [26, 15, 31] },
            darkPurple: { hex: '#3B1F47', rgb: [59, 31, 71] },
            stoneGray: { hex: '#4A3B52', rgb: [74, 59, 82] },
            deepViolet: { hex: '#6A146A', rgb: [106, 20, 106] }
        };

        const WIDTH = 320;
        const HEIGHT = 180;

        // RGB ìƒ‰ìƒ ë³´ê°„ í•¨ìˆ˜
        function interpolateColor(color1, color2, ratio) {
            return [
                Math.round(color1[0] + (color2[0] - color1[0]) * ratio),
                Math.round(color1[1] + (color2[1] - color1[1]) * ratio),
                Math.round(color1[2] + (color2[2] - color1[2]) * ratio)
            ];
        }

        // ë°°ê²½ ìƒì„± í•¨ìˆ˜
        function generateBackground() {
            // ìº”ë²„ìŠ¤ ì´ˆê¸°í™”
            ctx.clearRect(0, 0, WIDTH, HEIGHT);

            const topSection = Math.floor(HEIGHT / 3);
            const midSection = Math.floor(HEIGHT / 3);
            const bottomSection = HEIGHT - topSection - midSection;

            // 1. ìƒë‹¨ ê·¸ë¼ë°ì´ì…˜ (ì–´ë‘ìš´ ê³µê°„)
            for (let y = 0; y < topSection; y++) {
                const ratio = y / topSection;
                const color = interpolateColor(
                    COLORS.voidBlack.rgb,
                    COLORS.darkPurple.rgb,
                    ratio
                );
                ctx.fillStyle = `rgb(${color[0]}, ${color[1]}, ${color[2]})`;
                ctx.fillRect(0, y, WIDTH, 1);
            }

            // 2. ì¤‘ê°„ ì˜ì—­ (ìºë¦­í„° ë°°ì¹˜ ì˜ì—­)
            ctx.fillStyle = COLORS.darkPurple.hex;
            ctx.fillRect(0, topSection, WIDTH, midSection);

            // 3. í•˜ë‹¨ ê·¸ë¼ë°ì´ì…˜ (ë°”ë‹¥)
            for (let y = 0; y < bottomSection; y++) {
                const ratio = y / bottomSection;
                const color = interpolateColor(
                    COLORS.darkPurple.rgb,
                    COLORS.stoneGray.rgb,
                    ratio
                );
                const yPos = topSection + midSection + y;
                ctx.fillStyle = `rgb(${color[0]}, ${color[1]}, ${color[2]})`;
                ctx.fillRect(0, yPos, WIDTH, 1);
            }

            // 4. ë°”ë‹¥ ë””í…Œì¼ ì¶”ê°€
            addFloorDetails(topSection + midSection);

            // 5. ë¹„ë„¤íŒ… íš¨ê³¼
            addVignetteEffect();

            console.log('âœ“ ë°°ê²½ ìƒì„± ì™„ë£Œ');
        }

        // ë°”ë‹¥ ë””í…Œì¼ ì¶”ê°€
        function addFloorDetails(floorStart) {
            const linePositions = [
                floorStart + 10,
                floorStart + 30,
                floorStart + 50
            ];

            const darkerAccent = COLORS.deepViolet.rgb.map(c => Math.floor(c * 0.7));

            linePositions.forEach((yPos, index) => {
                if (yPos < HEIGHT) {
                    const color = index % 2 === 0
                        ? darkerAccent
                        : COLORS.stoneGray.rgb;
                    ctx.fillStyle = `rgb(${color[0]}, ${color[1]}, ${color[2]})`;
                    ctx.fillRect(0, yPos, WIDTH, 1);
                }
            });
        }

        // ë¹„ë„¤íŒ… íš¨ê³¼
        function addVignetteEffect() {
            const imageData = ctx.getImageData(0, 0, WIDTH, HEIGHT);
            const data = imageData.data;

            for (let y = 0; y < HEIGHT; y++) {
                for (let x = 0; x < WIDTH; x++) {
                    const dx = (x - WIDTH/2) / (WIDTH/2);
                    const dy = (y - HEIGHT/2) / (HEIGHT/2);
                    const distance = Math.sqrt(dx*dx + dy*dy);

                    if (distance > 0.6) {
                        const factor = 1 - Math.min((distance - 0.6) * 0.5, 0.3);
                        const index = (y * WIDTH + x) * 4;

                        data[index] = Math.floor(data[index] * factor);     // R
                        data[index + 1] = Math.floor(data[index + 1] * factor); // G
                        data[index + 2] = Math.floor(data[index + 2] * factor); // B
                    }
                }
            }

            ctx.putImageData(imageData, 0, 0);
        }

        // ë‹¤ìš´ë¡œë“œ í•¨ìˆ˜
        function downloadImage() {
            const link = document.createElement('a');
            link.download = 'battle_bg_prototype_v1.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
            console.log('âœ“ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì‹œì‘');
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ìƒì„±
        window.onload = function() {
            generateBackground();
            console.log('=== ì „íˆ¬ ë°°ê²½ ìƒì„±ê¸° ì¤€ë¹„ ì™„ë£Œ ===');
        };
    </script>
</body>
</html>
