# Phase 1 프로토타입 v3 - 구현 문서

## 1. 개요

### 1.1 버전 정보
- **버전**: v3 (에너지 기반 카드 시스템)
- **기반 문서**: `docs/Prototype-Game.md` (v2)
- **주요 변경**: 기본 공격 제거, 카드 중심 시스템으로 전환

### 1.2 검증 목표
> 플레이어가 A/B 선택에서 **가치 충돌을 명확히 인지**하는가?

---

## 2. 게임 시스템

### 2.1 기본 스펙

| 구분 | 값 | 비고 |
|------|-----|------|
| 플레이어 HP | 50 | 생존 조건 |
| 적 HP | 100 | 처치 목표 |
| 에너지 | 3 | 매 턴 시작 시 회복 |
| 최대 에너지 | 3 | 고정 |
| 적 반격 | 10/턴 | 턴 종료 시 발동 |

### 2.2 승리/패배 조건
- **승리**: 적 HP를 0으로 만듦
- **패배**: 플레이어 HP가 0이 됨

---

## 3. 에너지 시스템

### 3.1 핵심 규칙
1. **매 턴 시작**: 에너지 3으로 회복
2. **카드 사용**: 에너지 코스트 소모
3. **기본 공격 없음**: 모든 데미지는 카드 효과로 발생
4. **에너지 소비**: 오직 카드 사용으로만

### 3.2 게임 흐름
```
턴 시작
  ↓
에너지 3으로 회복
  ↓
[카드 사용 단계]
  - 카드 클릭 → A/B 선택 모달
  - 에너지 소모 & 효과 발동
  - 여러 카드 조합 가능
  ↓
[턴 종료 버튼]
  ↓
[적 반격] - HP -10 (방어 카드로 무효화 가능)
  ↓
다음 턴...
```

### 3.3 전략적 조합 예시
- **1+2 코스트**: 2장 사용
- **1+1+1 코스트**: 3장 사용
- **3 코스트**: 강력한 1장 사용
- **2+1 코스트**: 균형 잡힌 조합

---

## 4. 카드 시스템

### 4.1 카드 목록

#### 카드 1: 에너지 수급 (1⚡)
| 옵션 | 효과 |
|------|------|
| A: 급속 충전 | 다음 턴 에너지 +1 |
| B: 효율 충전 | 즉시 5 데미지 |

**가치축**: 단기 ↔ 장기
**태그**: [단기↑ / 장기↑]

---

#### 카드 2: 공격 방식 (2⚡)
| 옵션 | 효과 |
|------|------|
| A: 정밀 타격 | 확정 15 데미지 |
| B: 강타 | 5~25 무작위 데미지 |

**가치축**: 안정 ↔ 변동
**태그**: [안정↑ / 변동↑]

---

#### 카드 3: 자원 배분 (2⚡)
| 옵션 | 효과 |
|------|------|
| A: 집중 투자 | 20 데미지, 다음 턴 에너지 -1 |
| B: 분산 투자 | 15 데미지 |

**가치축**: 효율 ↔ 확장
**태그**: 없음 (텍스트만)

---

#### 카드 4: 방어 선택 (1⚡)
| 옵션 | 효과 |
|------|------|
| A: 선제 방어 | 이번 턴 반격 무효화 |
| B: 위험 감수 | 반격 2배, 다음 턴 에너지 +1 |

**가치축**: 통제 ↔ 자유
**태그**: 없음 (텍스트만)

---

#### 카드 5: 전략 전환 (2⚡)
| 옵션 | 효과 |
|------|------|
| A: 즉시 회복 | HP +10 회복 |
| B: 공세 전환 | 이번 턴 데미지 2배, 받는 반격도 2배 |

**가치축**: 단기(생존) ↔ 장기(승리)
**태그**: [단기(생존)↑ / 장기(승리)↑]

---

#### 카드 6: 최종 선택 (3⚡)
| 옵션 | 효과 |
|------|------|
| A: 일점 집중 | 35 데미지, HP -5 소모 |
| B: 지속 공세 | 25 데미지, 다음 턴 에너지 +1 |

**가치축**: 효율(리스크) ↔ 확장(안전)
**태그**: [효율(리스크)↑ / 확장(안전)↑]

---

### 4.2 카드 요약

| # | 카드명 | 코스트 | 역할 | 태그 |
|---|--------|--------|------|------|
| 1 | 에너지 수급 | 1⚡ | 버프/유틸 | O |
| 2 | 공격 방식 | 2⚡ | 직접 데미지 | O |
| 3 | 자원 배분 | 2⚡ | 데미지/유틸 | X |
| 4 | 방어 선택 | 1⚡ | 방어/유틸 | X |
| 5 | 전략 전환 | 2⚡ | 회복/버프 | O |
| 6 | 최종 선택 | 3⚡ | 피니셔 | O |

**총 에너지 코스트**: 11 (모든 카드 사용 시 최소 4턴 필요)

---

## 5. UI 레이아웃

```
┌─────────────────────────────────────────────────┐
│  턴 1                                           │
├─────────────────────────────────────────────────┤
│  👹 적                              80/100 HP   │
│  ████████████████░░░░░░░░░░░░░░░░░░░░░░░░░░   │
│  반격 데미지: 10                               │
├─────────────────────────────────────────────────┤
│  🧙 나                              40/50 HP    │
│  ████████████████████████░░░░░░░░░░░░░░░░░░   │
│                                                 │
│  ⚡ 에너지                          ●●○        │
├─────────────────────────────────────────────────┤
│                                                 │
│  ┌───┐ ┌───┐ ┌───┐ ┌───┐ ┌───┐ ┌───┐         │
│  │ 1 │ │ 2 │ │ 3 │ │ 4 │ │ 5 │ │ 6 │         │
│  │1⚡│ │2⚡│ │2⚡│ │1⚡│ │2⚡│ │3⚡│         │
│  └───┘ └───┘ └───┘ └───┘ └───┘ └───┘         │
│            ↑ 클릭하여 사용                      │
│                                                 │
├─────────────────────────────────────────────────┤
│              [ 턴 종료 ➡️ ]                     │
└─────────────────────────────────────────────────┘
```

---

## 6. 데이터 수집

### 6.1 자동 수집 항목

| 항목 | 설명 | 용도 |
|------|------|------|
| `card_id` | 카드 식별자 | 카드별 분석 |
| `card_number` | 카드 번호 (1~6) | 순서 분석 |
| `has_tag` | 태그 유무 | 혼합 방식 비교 |
| `choice` | A 또는 B | 비율 분석 |
| `decision_time_ms` | 카드 선택 시간 | 멈춤 판단 |
| `hover_time_a_ms` | A 옵션 호버 시간 | 비교 행동 |
| `hover_time_b_ms` | B 옵션 호버 시간 | 비교 행동 |
| `switch_count` | A↔B 전환 횟수 | 고민 깊이 |
| `turn_number` | 현재 턴 | 압박 상황 분석 |
| `player_hp` | 플레이어 HP | 위기 상황 영향 |
| `enemy_hp` | 적 HP | 승리 근접 영향 |
| `player_energy` | 보유 에너지 | 자원 상황 분석 |

### 6.2 게임 결과

| 항목 | 설명 |
|------|------|
| `result` | 승리 / 패배 |
| `total_turns` | 총 턴 수 |
| `remaining_hp` | 종료 시 플레이어 HP |
| `final_energy` | 종료 시 에너지 |

### 6.3 설문 (4문항)

| 문항 | 유형 |
|------|------|
| Q1: 선택할 때 고민이 되었나요? | 5점 척도 |
| Q2: 트레이드오프가 느껴졌나요? | 5점 척도 |
| Q3: 가장 고민되었던 카드는? | 선택형 (1~6) |
| Q4: 적의 존재가 선택에 영향을 주었나요? | 5점 척도 |

---

## 7. 파일 구조

```
Prototype/src/
├── types/
│   └── index.ts          # 타입 정의
├── data/
│   └── cards.ts          # 카드 데이터
├── stores/
│   └── gameStore.ts      # 게임 상태 관리 (Zustand)
├── components/
│   ├── BattleUI.tsx      # HP 바, 에너지 표시
│   ├── Hand.tsx          # 손패 UI
│   ├── CardChoice.tsx    # A/B 선택 모달
│   ├── Survey.tsx        # 설문
│   └── Results.tsx       # 결과 화면
├── App.tsx               # 메인 앱
├── main.tsx              # 엔트리 포인트
└── index.css             # 스타일
```

---

## 8. 실행 방법

```bash
# 개발 서버
cd Prototype
npm install
npm run dev
# http://localhost:5173/

# 빌드
npm run build
# dist/ 폴더에 빌드 결과 생성
```

---

## 9. 기술 스택

| 기술 | 용도 |
|------|------|
| React 19 | UI 프레임워크 |
| TypeScript | 타입 안전성 |
| Vite | 빌드 도구 |
| Tailwind CSS 4 | 스타일링 |
| Zustand | 상태 관리 |
| Framer Motion | 애니메이션 |

---

## 10. 버전 히스토리

| 버전 | 날짜 | 주요 변경 |
|------|------|----------|
| v1 | - | 초기 버전 |
| v2 | - | 전투 시스템 추가, 복잡한 몬스터 AI |
| **v3** | 2025-12-28 | 에너지 기반 카드 시스템, 기본 공격 제거, 단순화된 적 |
