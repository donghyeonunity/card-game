# 캐릭터 초기화 씬 요구사항 문서

## 1. 씬 개요

### 1.1 목적
- 매 런(run) 시작 시 플레이어의 캐릭터와 특성을 선택하는 씬
- 이번 런의 **초기 방향성**을 결정하는 Layer 2 중간 판단
- 선택한 조합이 배틀씬의 즉각 반응 판단에 영향을 미침

### 1.2 진입 조건
- **이전 씬**: 메인메뉴 씬 (01. mainmenu-scene)
- **진입 트리거**: "새 게임 시작" 또는 "다시 도전" 버튼 클릭
- **빈도**: 매 런마다 1회 (런이 끝나면 메인메뉴로 돌아감)

### 1.3 다음 씬
- **첫 번째 배틀씬** 또는 **이벤트 씬** (던전 구조에 따라)
- 선택 완료 후 즉시 게임 시작

### 1.4 핵심 경험
> "이번 런에서는 어떤 전략으로 갈까?"

**플레이어 예상 감정:**
- "지난번에는 무모한 전사가 재밌었는데, 이번엔 신중한 법사를 해볼까?"
- "어떤 특성 조합이 좋을까... 방어랑 드로우? 아니면 공격 위주?"
- "이 조합이 배틀에서 어떻게 느껴질지 기대돼!"

---

## 2. 선택 포인트

### 2.1 캐릭터 선택 (3종 중 1개)

| 캐릭터 | 기본 스탯 | 특징 | 전용 카드 특화 |
|--------|-----------|------|----------------|
| **전사** | HP: 60<br>에너지: 3 | 높은 체력, 공격 중심 | 공격/방어 카드 높은 출현율 |
| **법사** | HP: 40<br>에너지: 4 | 낮은 체력, 에너지 여유 | 주문/드로우 카드 높은 출현율 |
| **도적** | HP: 50<br>에너지: 3 | 밸런스형, 속임수 중심 | 회피/에너지 조작 카드 높은 출현율 |

**플레이어 예상 감정:**
- 전사: "체력이 많으니까 안정적이겠어, 실수해도 버틸 수 있을 것 같아" (안정성)
- 법사: "에너지가 많으니까 선택지가 넓겠는데, HP가 낮아서 긴장되네" (변동성)
- 도적: "무난한 선택인데, 특색이 약한가?" (효율성)

---

### 2.2 특성 선택 (5개 중 최대 2개)

**선택 규칙:**
- 5개 특성 중 **최대 2개**까지 선택 가능
- 0개, 1개, 2개 모두 허용 (자유 선택)
- 선택한 특성에 해당하는 **시작 카드** 획득

| 특성 | 계열 | 효과 | 획득 카드 |
|------|------|------|-----------|
| **신중함** | 방어 | 받는 피해 -10% | "방어 태세" (방어 +5) |
| **무모함** | 공격 | 공격력 +15%, 받는 피해 +10% | "무모한 돌격" (공격 +8, HP -3) |
| **분석적** | 드로우 | 턴 시작 시 추가 드로우 +1 | "전략 분석" (드로우 +1) |
| **직감적** | 서치 | 첫 턴에 원하는 카드 1장 서치 | "섬광 같은 직감" (랜덤 카드 1장 즉시 드로우) |
| **협상가** | 골드 | 획득 골드 +20% | "거래의 달인" (골드 +20) |

**플레이어 예상 감정:**

**2개 선택:**
- "신중함 + 분석적이면 안정적으로 카드도 많이 뽑을 수 있겠네!"
- "무모함 + 직감적으로 빠르게 승부를 보는 빌드를 해볼까?"
- **가치**: 빌드 방향성 명확화

**1개 선택:**
- "이번엔 특성 하나로 단순하게 가볼까"
- **가치**: 간결함, 시작 덱 최소화

**0개 선택:**
- "기본 상태로 시작해서 런 중에 빌드를 결정하고 싶어"
- **가치**: 유연성 극대화

---

## 3. 카드 획득 시스템

### 3.1 전용 카드 풀 + 가중치 시스템

**구조:**

```
전체 카드 풀 = 전용 카드 풀 + 공통 카드 풀

- 전사 전용 카드: 30장 (공격/방어 특화)
- 마법사 전용 카드: 30장 (주문/드로우 특화)
- 도적 전용 카드: 30장 (회피/에너지 조작 특화)
- 공통 카드: 10장 (모든 캐릭터 사용 가능)
```

**배틀 보상 카드 출현 확률:**

| 카드 유형 | 출현 확률 |
|-----------|----------|
| 자신의 전용 카드 | 70% |
| 공통 카드 | 25% |
| 다른 캐릭터 전용 카드 | 5% (희귀) |

**플레이어 예상 감정:**
- "보상으로 주로 내 전용 카드가 나오네, 빌드를 발전시키기 좋아"
- "어? 마법사 카드가 떴네! 희귀하긴 한데, 전사랑 시너지가 있을까?" (발견의 놀라움)
- "공통 카드는 어떤 캐릭터든 쓸 수 있으니까 안정적이야"

---

### 3.2 캐릭터 × 특성 독립성

**핵심 원칙:**
- 캐릭터 선택은 **획득 가능한 카드 풀**에 영향
- 특성 선택은 **시작 덱에 추가되는 카드**에 영향
- 두 시스템은 **독립적으로 작동**

**예시:**
```
전사 + 신중함 선택 시:

1. 캐릭터 효과 (전사)
   - 기본 스탯: HP 60, 에너지 3
   - 배틀 보상에서 전사 전용 카드 70% 출현

2. 특성 효과 (신중함)
   - 시작 덱에 "방어 태세" 카드 추가
   - 받는 피해 -10% 패시브

3. 독립성의 의미
   - 마법사 + 신중함 선택 시
   - 같은 "방어 태세" 카드 획득
   - 하지만 마법사는 HP 40이라서 방어 카드의 체감이 다름
```

**플레이어 예상 감정:**
- "어떤 캐릭터를 골라도 신중함은 같은 카드를 주는구나, 명확해"
- "하지만 HP가 낮은 마법사는 방어 카드가 더 중요하게 느껴질 것 같아"
- "캐릭터랑 특성을 어떻게 조합하느냐에 따라 체감이 달라지겠네"

---

## 4. 인터랙션 요구사항

### 4.1 캐릭터 선택
- 3개 캐릭터 중 1개 선택 (하단 탭 버튼)
- 선택 시 좌측 일러스트/대사 + 우측 정보 갱신
- 선택된 탭 강조 표시

### 4.2 특성 선택
- 5개 특성 버튼 (3x2 그리드, 1칸은 설명용)
- **토글 방식**: 클릭 시 선택/해제
- **최대 2개 제한**: 2개 선택 상태에서 다른 특성 클릭 시 선택 불가 (비활성화 또는 안내 메시지)
- 선택된 특성은 테두리 강조 (금색 `#C89B3C`)
- 특성 클릭 시 우측 설명 박스에 상세 정보 표시

### 4.3 카드 미리보기
- 선택한 특성에 해당하는 획득 카드 표시 (최대 2장)
- 카드 호버 시 상세 툴팁 표시
- 특성 미선택 시 빈 슬롯 또는 안내 메시지

### 4.4 최종 확인
- "게임 시작 →" 버튼 클릭 시 다음 씬으로 전환
- 캐릭터 미선택 시 버튼 비활성화

---

## 5. 플레이어 피드백

**실시간 피드백:**
- 특성 선택/해제 시 즉시 카드 미리보기 업데이트
- 선택된 특성 개수 표시 (예: "1/2 선택됨")
- 2개 선택 완료 시 시각적 강조 (모든 슬롯 채워짐)

**명확한 정보 제공:**
- 모든 카드 효과를 수치로 명시 (PRD: 명확한 정보 공개)
- 특성 효과 + 획득 카드 정보 분리 표시
- 캐릭터 기본 스탯 명확히 표시

**플레이어 예상 감정:**
- "특성을 선택할 때마다 카드가 바로 표시되니까 직관적이야"
- "최대 2개만 선택할 수 있으니까 고민이 되네"
- "최종 덱을 미리 볼 수 있어서 안심이 돼"

---

## 6. 데이터 구조 (TypeScript 인터페이스)

### 6.1 캐릭터 데이터

```typescript
// 캐릭터 타입
enum CharacterType {
  WARRIOR = "warrior",
  MAGE = "mage",
  ROGUE = "rogue",
}

// 캐릭터 인터페이스
interface Character {
  id: CharacterType;
  name: string;
  description: string;
  dialogue: string; // 캐릭터 대사
  baseStats: {
    hp: number;
    energy: number;
  };
  specialization: string; // "공격/방어", "주문/드로우" 등
  exclusiveCardPoolWeight: number; // 전용 카드 출현 확률 (0.7 = 70%)
}

// 캐릭터 데이터 예시
const CHARACTERS: Character[] = [
  {
    id: CharacterType.WARRIOR,
    name: "전사",
    description: "높은 체력과 강력한 공격력을 가진 근접 전투의 달인",
    dialogue: "어머니 조금만... 조금만 더 버텨주세요",
    baseStats: {
      hp: 60,
      energy: 3,
    },
    specialization: "공격/방어",
    exclusiveCardPoolWeight: 0.7,
  },
  // ... 마법사, 도적
];
```

---

### 6.2 특성 데이터

```typescript
// 특성 타입
enum TraitType {
  CAUTIOUS = "cautious",      // 신중함
  RECKLESS = "reckless",      // 무모함
  ANALYTICAL = "analytical",  // 분석적
  INTUITIVE = "intuitive",    // 직감적
  NEGOTIATOR = "negotiator",  // 협상가
}

// 특성 카드 정보
interface TraitCard {
  cardId: string;
  name: string;
  description: string;
  effect: string; // 효과 상세 설명
}

// 특성 인터페이스
interface Trait {
  id: TraitType;
  name: string;
  description: string;
  passiveEffect: string; // 패시브 효과 설명
  card: TraitCard; // 선택 시 획득하는 카드
}

// 특성 데이터 예시
const TRAITS: Trait[] = [
  {
    id: TraitType.CAUTIOUS,
    name: "신중함",
    description: "안정적인 방어와 생존을 중시합니다",
    passiveEffect: "받는 피해 -10%",
    card: {
      cardId: "cautious_defense",
      name: "방어 태세",
      description: "방어력 +5",
      effect: "defense +5",
    },
  },
  {
    id: TraitType.RECKLESS,
    name: "무모함",
    description: "위험을 감수하고 공격적으로 싸웁니다",
    passiveEffect: "공격력 +15%, 받는 피해 +10%",
    card: {
      cardId: "reckless_charge",
      name: "무모한 돌격",
      description: "공격력 +8, HP -3",
      effect: "attack +8, hp -3",
    },
  },
  // ... 다른 특성들
];
```

---

### 6.3 플레이어 선택 상태

```typescript
// 플레이어 선택 상태
interface CharacterInitState {
  selectedCharacter: CharacterType | null;
  selectedTraits: TraitType[]; // 최대 2개
  maxTraits: number; // 기본값 2
}

// 초기 상태
const INITIAL_STATE: CharacterInitState = {
  selectedCharacter: null,
  selectedTraits: [],
  maxTraits: 2,
};

// 획득 카드 계산 함수
function getAcquiredCards(state: CharacterInitState): TraitCard[] {
  return state.selectedTraits.map(traitId => {
    const trait = TRAITS.find(t => t.id === traitId);
    return trait?.card;
  }).filter(Boolean) as TraitCard[];
}
```

---

## 7. PRD 연결

### 7.1 Layer 2 중간 판단

**이 씬의 위치:**
- **판단 계층**: Layer 2 (Reflective Mid Judgment)
- **빈도**: 매 런마다 1회 (간헐적)
- **무게**: 중간 (런 전체에 영향)

**PRD 핵심 가치 반영:**
> "여러 반응 판단의 결과가 반영된다"
- 이전 런에서의 경험이 이번 선택에 영향을 줌
- "지난번에 신중함이 좋았으니 이번에도..." 또는 "이번엔 다르게 해보자"

> "복수의 가치 축이 동시에 명시된다"
- 캐릭터 선택 시 **안정 ↔ 변동** 충돌 (전사 vs 마법사)
- 특성 선택 시 **공격 ↔ 방어** 또는 **단기 ↔ 장기** 충돌

---

### 7.2 가치 충돌 매핑

| 선택 상황 | 가치 축 충돌 | 플레이어 감정 |
|-----------|-------------|---------------|
| **캐릭터 선택** | 안정 ↔ 변동 | "전사의 안정성 vs 마법사의 에너지" |
| **무모함 특성** | 단기 ↔ 장기 | "초반 강력함 vs HP 손실 누적" |
| **신중함 vs 무모함** | 안정 ↔ 도전 | "방어적 플레이 vs 공격적 플레이" |
| **2개 선택 vs 0개 선택** | 특화 ↔ 유연 | "명확한 빌드 vs 런 중 결정" |

---

### 7.3 배틀씬 연결

**선택 → 반응 판단 영향:**

| 이 씬 선택 | 배틀씬 영향 | 플레이어 감정 변화 |
|-----------|------------|-------------------|
| 신중함 | 피해 감소, 방어 카드 보유 | "버티면서 싸울 수 있어" → 안정감 |
| 무모함 | 공격력 증가, HP 리스크 | "한 방이 쎈데 HP가 줄어" → 긴장감 |
| 분석적 | 드로우 증가, 선택지 확장 | "카드가 많아서 선택지가 넓어" → 통제감 |
| 직감적 | 원하는 카드 서치 | "필요한 카드를 찾을 수 있어" → 전략감 |
| 협상가 | 골드 증가, 상점 활용 | "상점에서 좋은 카드 살 수 있어" → 장기 전략 |

**핵심:**
- 이 씬의 선택이 배틀씬의 **즉각 반응 판단 지형**을 바꿈
- PRD의 "중간 판단이 반응 판단을 다시 긴장 상태로 되돌리는 장치"에 부합

---

## 8. 예외 처리

| 상황 | 대응 방안 | 플레이어 메시지 |
|------|----------|----------------|
| 캐릭터 미선택 | "게임 시작" 버튼 비활성화 | "캐릭터를 선택하세요" |
| 특성 미선택 | 허용 (0개도 가능) | - |
| 특성 3개 이상 선택 시도 | 선택 불가 (UI 제한) | "최대 2개까지 선택 가능합니다" |
| 뒤로가기 | 메인메뉴로 복귀 확인 | "선택을 취소하고 메인메뉴로 돌아가시겠습니까?" |

---

## 9. 향후 논의 사항

### 9.1 밸런스 조정 대상

**테스트 후 조정 가능:**
- 특성별 패시브 효과 수치 (피해 -10%, 공격력 +15% 등)
- 특성 선택 개수 (현재 최대 2개 → 3개로 변경?)
- 각 특성 카드의 효과 밸런스

---

### 9.2 확장 가능성

**향후 추가 가능한 요소:**

1. **캐릭터 언락 시스템**
   - 처음엔 전사만, 이후 마법사/도적 해금
   - 플레이어 감정: "새 캐릭터를 해금했다!" (성취감)

2. **특성 언락 시스템**
   - 특정 조건 달성 시 새로운 특성 추가
   - 플레이어 감정: "이 특성은 어떤 효과일까?" (발견의 기대)

3. **특성 선택 개수 증가**
   - 업적 달성 시 최대 선택 개수 +1 (최대 3개)
   - 플레이어 감정: "더 많은 조합을 시도할 수 있어!" (성장감)

4. **캐릭터 × 특성 시너지 추가**
   - 특정 캐릭터 + 특성 조합에 보너스
   - 예: "전사 + 무모함" → 추가 공격력 +2
   - 플레이어 감정: "이 조합이 특별하구나!" (발견의 재미)

---

### 9.3 UI/UX 개선 후보

**테스트 후 검토:**
- 카드 미리보기 이미지 추가 (현재는 텍스트만)
- 특성 선택 튜토리얼 (처음 플레이 시)
- "추천 조합" 버튼 (초보자용)
- "랜덤 선택" 버튼 (빠른 플레이용)
- 이전 런 기록 표시 ("지난번: 전사 + 신중함")

---

### 9.4 데이터 분석 항목

**추후 수집할 데이터:**
- 가장 많이 선택되는 캐릭터 (밸런스 확인)
- 가장 많이 선택되는 특성 (인기도)
- 특성 선택 패턴 (2개 vs 1개 vs 0개 비율)
- 승률과 선택의 상관관계 (어떤 조합이 강한지)

---

## 10. 구현 우선순위

### Phase 1: 프로토타입 (필수)
- [ ] 캐릭터 3종 데이터 정의
- [ ] 특성 5종 데이터 정의
- [ ] 캐릭터 선택 UI (하단 탭)
- [ ] 특성 토글 UI (최대 2개 제한)
- [ ] 획득 카드 미리보기
- [ ] 배틀씬 연결 (선택한 캐릭터/카드로 시작)

### Phase 2: 핵심 기능 (중요)
- [ ] 캐릭터 일러스트 + 대사 표시
- [ ] 카드 상세 보기 툴팁
- [ ] 예외 처리 (미선택, 뒤로가기 등)
- [ ] 선택 상태 저장

### Phase 3: 확장 (선택)
- [ ] 카드 이미지 추가
- [ ] 애니메이션 효과 (카드 획득 시)
- [ ] 이전 런 기록 표시
- [ ] 추천 조합 시스템

---

## 11. 참고 문서

- **PRD**: `docs/00. project/PRD.md`
- **배틀씬 요구사항**: `docs/01. game/03. battle-scene/requirements.md`
- **와이어프레임**: `docs/01. game/02. character-init-scene/wireframe.md`
- **코딩 컨벤션**: `docs/coding_convention.md`

---

## 변경 이력

| 날짜 | 버전 | 변경 내용 | 작성자 |
|------|------|-----------|--------|
| 2025-12-28 | 1.0 | 초안 작성 | Claude Code |
| 2026-01-02 | 2.0 | 포인트 시스템 → 토글 선택(최대 2개)으로 변경, 조합 보너스 삭제 | Claude Code |

---

**문서 작성 완료**

이 문서는 캐릭터 초기화 씬의 모든 요구사항을 정리한 것입니다.
wireframe.md와 일관성을 유지하며, 테스트 후 밸런스 조정이 필요할 수 있습니다.
